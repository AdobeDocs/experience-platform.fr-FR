---
keywords: Experience Platform ; accueil ; rubriques populaires ; Amazon S3 ; s3 ; S3
solution: Experience Platform
title: Création d'une connexion de base Amazon S3 à l'aide de l'API Flow Service
topic-legacy: overview
type: Tutorial
description: Découvrez comment connecter Adobe Experience Platform à Amazon S3 à l’aide de l’API Flow Service.
exl-id: c11cf1c8-86ff-4851-b2c2-7e421dcc37ea
source-git-commit: 89bcab47ac3c5e046187a5a616ad7e02d05e16a5
workflow-type: tm+mt
source-wordcount: '738'
ht-degree: 14%

---

# Créer un [!DNL Amazon] Connexion de base S3 à l’aide de la [!DNL Flow Service] API

Une connexion de base représente la connexion authentifiée entre une source et Adobe Experience Platform.

Ce tutoriel vous explique les étapes à suivre pour créer une connexion de base pour [!DNL Amazon S3] (ci-après dénommés &quot;[!DNL S3]&quot;) en utilisant la [[!DNL Flow Service] API](https://www.adobe.io/experience-platform-apis/references/flow-service/).

## Prise en main

Ce guide nécessite une compréhension professionnelle des composants suivants d’Adobe Experience Platform :

* [Sources](../../../../home.md): [!DNL Experience Platform] permet l’assimilation de données à partir de diverses sources tout en vous permettant de structurer, étiqueter et améliorer les données entrantes à l’aide de [!DNL Platform] services.
* [Environnements de test](../../../../../sandboxes/home.md) : [!DNL Experience Platform] fournit des environnements de test virtuels qui divisent une instance [!DNL Platform] unique en environnements virtuels distincts pour favoriser le développement et l’évolution d’applications d’expérience numérique.

Les sections suivantes fournissent des informations supplémentaires que vous devez connaître pour vous connecter à un [!DNL S3] stockage à l’aide de la [!DNL Flow Service] API.

### Collecte des informations d’identification requises

Pour [!DNL Flow Service] pour vous connecter à [!DNL S3] , vous devez fournir des valeurs pour les propriétés de connexion suivantes :

| Informations d&#39;identification | Description |
| ---------- | ----------- |
| `s3AccessKey` | L’ID de clé d’accès pour votre [!DNL S3] Pot. |
| `s3SecretKey` | L’ID de clé secrète de votre [!DNL S3] Pot. |
| `serviceUrl` | (Facultatif) La [!DNL S3] point de terminaison auquel se connecter. Ce champ est obligatoire lorsque votre [!DNL S3] est spécifique à la région. Le format de `serviceUrl` est : `https://s3.{REGION}.amazonaws.com/)`. |
| `bucketName` | Le [!DNL S3] contient vos données et les métadonnées descriptives correspondantes. Votre [!DNL S3] le nom du seau doit comporter entre trois et 63 caractères et doit commencer et se terminer par une lettre ou un chiffre. Le nom du regroupement ne peut contenir que des lettres minuscules, des chiffres ou des tirets (`-`) et ne peut pas être formaté en tant qu’adresse IP. |
| `folderPath` | Chemin d’accès au dossier dans votre [!DNL S3] où vos données sont stockées. Ces informations d’identification sont requises lorsque l’utilisateur dispose d’un accès restreint. |
| `s3SessionToken` | (Facultatif) Jeton temporaire de courte durée qui vous permet de fournir un accès temporaire à votre [!DNL S3] aux utilisateurs dans des environnements non approuvés. Pour plus d’informations, consultez la [[!DNL S3] présentation](../../../../connectors/cloud-storage/s3.md#prerequisites). |
| `connectionSpec.id` | La spécification de connexion renvoie les propriétés de connecteur d’une source, y compris les spécifications d’authentification liées à la création des connexions de base et source. ID de spécification de connexion pour [!DNL S3] est : `ecadc60c-7455-4d87-84dc-2a0e293d997b`. |

Pour plus d’informations sur la prise en main, consultez la page [this [!DNL Amazon Web Services] document](https://aws.amazon.com/blogs/security/wheres-my-secret-access-key/).

### Utilisation des API de plate-forme

Pour plus d’informations sur la manière d’effectuer des appels vers les API de plate-forme, consultez le guide sur [prise en main des API de plate-forme](../../../../../landing/api-guide.md).

## Création d’une connexion de base

Une connexion de base conserve les informations entre votre source et la plate-forme, y compris les informations d&#39;identification de votre source, l&#39;état actuel de la connexion et votre ID de connexion de base unique. L’ID de connexion de base vous permet d’explorer et de parcourir les fichiers à partir de votre source et d’identifier les éléments spécifiques que vous souhaitez assimiler, y compris des informations concernant leurs types et formats de données.

Pour créer un ID de connexion de base, effectuez une demande de POST à l’adresse `/connections` point de terminaison lors de la fourniture de votre [!DNL S3] les informations d&#39;identification d&#39;authentification dans le cadre des paramètres de demande.

**Format d’API**

```http
POST /connections
```

**Requête**

La demande suivante crée une connexion de base pour [!DNL S3]:

```shell
curl -X POST \
    'https://platform.adobe.io/data/foundation/flowservice/connections' \
    -H 'Authorization: Bearer {ACCESS_TOKEN}' \
    -H 'x-api-key: {API_KEY}' \
    -H 'x-gw-ims-org-id: {IMS_ORG}' \
    -H 'x-sandbox-name: {SANDBOX_NAME}' \
    -H 'Content-Type: application/json' \
    -d '{
        "name": "Amazon S3 base connection",
        "description": "Amazon S3 base connection with temporary session token",
        "auth": {
            "specName": "Access Key",
            "params": {
                "s3AccessKey": "{S3_ACCESS_KEY}",
                "s3SecretKey": "{S3_SECRET_KEY}",
                "s3SessionToken": "{S3_SESSION_TOKEN}
            }
        },
        "connectionSpec": {
            "id": "ecadc60c-7455-4d87-84dc-2a0e293d997b",
            "version": "1.0"
        }
    }'
```

| Propriété | Description |
| -------- | ----------- |
| `auth.params.s3AccessKey` | La clé d’accès associée à votre [!DNL S3] Pot. |
| `auth.params.s3SecretKey` | Votre clé secrète associée à votre [!DNL S3] Pot. |
| `auth.params.s3SessionToken` | (Facultatif) Le court terme, temporaire [!DNL S3] jeton utilisé pour accéder à votre seau. |
| `connectionSpec.id` | Le [!DNL S3] ID de spécification de connexion : `ecadc60c-7455-4d87-84dc-2a0e293d997b` |

**Réponse**

Une réponse réussie renvoie les détails de la connexion nouvellement créée, y compris son identifiant unique (`id`). Cet ID est nécessaire pour explorer votre espace de stockage dans le tutoriel suivant.

```json
{
    "id": "4cb0c374-d3bb-4557-b139-5712880adc55",
    "etag": "\"1700d77b-0000-0200-0000-5e3b41a10000\""
}
```

## Étapes suivantes

En suivant ce tutoriel, vous avez créé une connexion S3 à l’aide d’API et un ID unique a été obtenu dans le corps de la réponse. Vous pouvez utiliser cet ID de connexion pour [exploration des sites de stockage dans le cloud à l’aide de l’API Flow Service](../../explore/cloud-storage.md).

## Annexe

La section suivante fournit des informations supplémentaires sur l’utilisation de la [!DNL S3] source.

### Mettre à jour votre [!DNL S3] jeton de session

Le `s3SessionToken` est temporaire et doit être mis à jour à l’expiration. Vous pouvez mettre à jour le jeton de session associé à votre connexion de base en adressant une demande de PATCH à [!DNL Flow Service] API. Voir la section [[!DNL S3] présentation](../../../../connectors/cloud-storage/s3.md#prerequisites) pour plus d&#39;informations sur les informations d&#39;identification de sécurité temporaires pour [!DNL S3].

>[!IMPORTANT]
>
>Le `If-Match` est requis lors de la demande de PATCH. La valeur de cet en-tête correspond à l&#39;étiquette unique de la connexion à mettre à jour.

**Format d’API**

```http
PATCH /connections
```

**Requête**

La demande suivante crée une connexion de base pour [!DNL S3]:

```shell
curl -X PATCH \
    'https://platform.adobe.io/data/foundation/flowservice/connections/4cb0c374-d3bb-4557-b139-5712880adc55' \
    -H 'Authorization: Bearer {ACCESS_TOKEN}' \
    -H 'Content-Type: application/json' \
    -H 'x-api-key: {API_KEY}' \
    -H 'x-gw-ims-org-id: {IMS_ORG}' \
    -H 'x-sandbox-name: {SANDBOX_NAME}' \
    -H 'If-Match: "1700d77b-0000-0200-0000-5e3b41a10000"'
    -d '[
        {
            "op": "replace",
            "path": "/auth/params/s3SessionToken",
            "value": "{SESSION_TOKEN}"
        }
    ]'
```

| Paramètre | Description |
| --------- | ----------- |
| `op` | Appel d&#39;opération utilisé pour définir l&#39;action nécessaire pour mettre à jour la connexion. Les opérations comprennent : `add`, `replace` et `remove`. |
| `path` | Chemin d&#39;accès du paramètre à mettre à jour. |
| `value` | Nouvelle valeur avec laquelle vous souhaitez mettre à jour votre paramètre. |

**Réponse**

Une réponse réussie renvoie votre ID de connexion de base et une balise mise à jour. Vous pouvez vérifier la mise à jour en adressant une demande de GET à la [!DNL Flow Service] API, lors de la fourniture de votre ID de connexion.

```json
{
    "id": "4cb0c374-d3bb-4557-b139-5712880adc55",
    "etag": "\"3600e378-0000-0200-0000-5f40212f0000\""
}
```
